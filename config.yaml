# GPU 训练任务调度器配置文件
#
# 任务配置说明：
#   name: 任务名称（唯一标识）
#   work_dir: 项目目录（宿主机路径）
#   docker_script: Docker 启动脚本（相对于 work_dir）
#   container_work_dir: 容器内工作目录
#   train_command: 训练命令
#   gpu_count: 需要的 GPU 数量
#   completion_file: 完成标志文件路径（宿主机路径）
#   image: Docker 镜像名称（可选，默认使用 docker_script 中的默认镜像）
#
# 可选控制字段：
#   enabled: 是否启用任务（默认 true），设为 false 时任务从 pending 池移除
#   retry: 是否重试失败任务（默认 false），设为 true 时将 failed 池中的任务移回 pending
#   force_rerun: 是否强制重新运行（默认 false），设为 true 时将 completed 池中的任务移回 pending
#
# 注意：修改任务的核心配置（work_dir, docker_script, container_work_dir, train_command,
#       gpu_count, completion_file, image）后，pending 池中的任务会自动更新配置

tasks:
  # 示例任务 1
  - name: "sft_training_task1"
    work_dir: "/home/jiayong.wan/llmparty"
    docker_script: "docker/training/docker_run.sh"
    container_work_dir: "training"
    train_command: "bash run_verl.sh --yaml sft.yaml"
    gpu_count: 3
    completion_file: "/path/to/output/checkpoint/final.pt"
    image: "llmparty"  # 可选，指定 Docker 镜像
    retry: true

  # 示例任务 2
  - name: "sft_training_task2"
    work_dir: "/home/jiayong.wan/llmparty"
    docker_script: "docker/training/docker_run.sh"
    container_work_dir: "training"
    train_command: "bash run_verl.sh --yaml sft2.yaml"
    gpu_count: 4
    completion_file: "/path/to/output2/checkpoint/final.pt"
    # image: "other_image"  # 不指定则使用 docker_script 中的默认镜像

